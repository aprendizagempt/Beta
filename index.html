<!DOCTYPE html>
<html lang="pt-PT">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hor√°rio CCD 49/2025</title>

<!-- ===== SCRIPT CALEND√ÅRIO ===== -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const btn = document.createElement("button");
  btn.id = "downloadIcs";
  btn.textContent = "üìÖ Adicionar aulas ao Calend√°rio";
  btn.style.marginLeft = "8px";
  btn.style.background = "#3498db";
  btn.style.color = "#fff";
  btn.style.border = "none";
  btn.style.padding = "10px 20px";
  btn.style.borderRadius = "6px";
  btn.style.fontWeight = "bold";
  btn.style.cursor = "pointer";
  document.querySelector(".pdf-button-container").appendChild(btn);

  btn.onclick = () => {
    const aulas = [
      { day:6, hour:9, ufcd:"CD_B2_C" },{ day:6, hour:10, ufcd:"CD_B2_C" },
      { day:6, hour:11, ufcd:"CD_B2_C" },{ day:7, hour:13, ufcd:"CD_B2_C" },
      { day:7, hour:14, ufcd:"CD_B2_C" },{ day:7, hour:15, ufcd:"CD_B2_C" },
      { day:7, hour:16, ufcd:"CD_B2_C" },{ day:8, hour:10, ufcd:"CD_B2_C" },
      { day:8, hour:11, ufcd:"CD_B2_C" },{ day:8, hour:12, ufcd:"CD_B2_C" },
      { day:9, hour:13, ufcd:"CD_B2_C" },{ day:9, hour:14, ufcd:"CD_B2_C" },
      { day:9, hour:15, ufcd:"CD_B2_C" },{ day:9, hour:16, ufcd:"CD_B2_C" },
      { day:12, hour:9, ufcd:"CD_B2_C" },{ day:12, hour:10, ufcd:"CD_B2_C" },
      { day:12, hour:11, ufcd:"CD_B2_C" },{ day:13, hour:9, ufcd:"CD_B2_C" },
      { day:13, hour:10, ufcd:"CD_B2_C" },{ day:13, hour:11, ufcd:"CD_B2_C" },
      { day:14, hour:13, ufcd:"CD_B2_D" },{ day:14, hour:14, ufcd:"CD_B2_D" },
      { day:14, hour:15, ufcd:"CD_B2_D" },{ day:14, hour:16, ufcd:"CD_B2_D" },
      { day:15, hour:10, ufcd:"CD_B2_D" },{ day:15, hour:11, ufcd:"CD_B2_D" },
      { day:15, hour:12, ufcd:"CD_B2_D" },{ day:16, hour:13, ufcd:"CD_B2_D" },
      { day:16, hour:14, ufcd:"CD_B2_D" },{ day:16, hour:15, ufcd:"CD_B2_D" },
      { day:16, hour:16, ufcd:"CD_B2_D" },{ day:20, hour:9, ufcd:"CD_B2_D" },
      { day:20, hour:10, ufcd:"CD_B2_D" },{ day:20, hour:11, ufcd:"CD_B2_D" },
      { day:21, hour:13, ufcd:"CD_B2_D" },{ day:21, hour:14, ufcd:"CD_B2_D" },
      { day:21, hour:15, ufcd:"CD_B2_D" },{ day:21, hour:16, ufcd:"CD_B2_D" },
      { day:22, hour:10, ufcd:"CD_B2_D" },{ day:22, hour:11, ufcd:"CD_B2_D" },
      { day:22, hour:12, ufcd:"CD_B2_D" },{ day:23, hour:10, ufcd:"CD_B2_D" },
      { day:23, hour:11, ufcd:"CD_B2_D" },{ day:23, hour:12, ufcd:"CD_B2_D" }
    ];

    let ics=`BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//CCD49//PT\n`;
    aulas.forEach(a=>{
      ics+=`BEGIN:VEVENT
DTSTART:202601${String(a.day).padStart(2,"0")}T${String(a.hour).padStart(2,"0")}0000
DTEND:202601${String(a.day).padStart(2,"0")}T${String(a.hour+1).padStart(2,"0")}0000
SUMMARY:Aula ${a.ufcd}
END:VEVENT\n`;
    });
    ics+="END:VCALENDAR";

    const blob=new Blob([ics],{type:"text/calendar"});
    const url=URL.createObjectURL(blob);
    const a=document.createElement("a");
    a.href=url;a.download="Horario.ics";a.click();
  };
});
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
body{font-family:Arial;background:#f5f5f5;margin:0}
header{background:#2c3e50;color:#fff;text-align:center;padding:14px}
.pdf-button-container{text-align:center;margin:12px}
.digital-clock{background:#b39d74;text-align:center;padding:10px;margin:15px auto;width:95%;border-radius:6px;font-weight:bold}
footer{background:#2c3e50;color:#fff;text-align:center;padding:12px;margin-top:25px}
</style>
</head>

<body>

<header>
<h1>Cronograma Janeiro 2026</h1>
<h2>CCD 49/2025</h2>
</header>

<div class="pdf-button-container">
<button id="downloadPdf">üëâ Descarregar Hor√°rio em PDF</button>
</div>

<div class="digital-clock" id="clockDisplay">Rel√≥gio ativo</div>

<!-- ===================== JOGOS ===================== -->
<div style="max-width:600px;margin:30px auto;background:#fff;padding:15px;border-radius:8px">

<h3 style="text-align:center">üéÆ Pausa Digital</h3>

<!-- JOGO DO GALO -->
<h4 style="text-align:center">Jogo do Galo</h4>
<div id="galo" style="display:grid;grid-template-columns:repeat(3,1fr);gap:6px;max-width:180px;margin:auto"></div>
<p id="galoStatus" style="text-align:center;font-weight:bold"></p>

<hr>

<!-- TETRIS -->
<h4 style="text-align:center">Tetris</h4>
<canvas id="tetris" width="200" height="400" style="display:block;margin:auto;border:2px solid #333"></canvas>
<p style="text-align:center;font-size:12px">‚¨ÖÔ∏è ‚û°Ô∏è mover | ‚¨áÔ∏è cair | ‚¨ÜÔ∏è rodar</p>

</div>

<footer>¬© 2026 ‚Äì CCD 49/2025</footer>

<script>
/* ===== JOGO DO GALO ===== */
const galo=document.getElementById("galo");
const statusG=document.getElementById("galoStatus");
let board=Array(9).fill("");
let turn="X";

for(let i=0;i<9;i++){
  const c=document.createElement("div");
  c.style.height="60px";
  c.style.background="#ecf0f1";
  c.style.display="flex";
  c.style.alignItems="center";
  c.style.justifyContent="center";
  c.style.fontSize="24px";
  c.onclick=()=>play(i,c);
  galo.appendChild(c);
}
function play(i,c){
  if(board[i])return;
  board[i]=turn;c.textContent=turn;
  if(win()){statusG.textContent=`${turn} venceu!`;galo.style.pointerEvents="none";}
  else turn=turn==="X"?"O":"X";
}
function win(){
  const w=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
  return w.some(a=>a.every(i=>board[i]===turn));
}

/* ===== TETRIS ===== */
const canvas=document.getElementById("tetris");
const ctx=canvas.getContext("2d");
ctx.scale(20,20);
const arena=Array.from({length:20},()=>Array(10).fill(0));
let p={x:4,y:0,shape:[[1,1,1],[0,1,0]]};

function draw(){
 ctx.fillStyle="#fff";ctx.fillRect(0,0,10,20);
 p.shape.forEach((r,y)=>r.forEach((v,x)=>{
  if(v){ctx.fillStyle="#3498db";ctx.fillRect(p.x+x,p.y+y,1,1);}
 }));
 requestAnimationFrame(draw);
}
draw();
</script>

</body>
</html>